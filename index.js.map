{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchImages = async (searchQuery, page) => {\n  const API_KEY = '48010442-005cbb84b5a65166ca3b031bb';\n  const URL = `https://pixabay.com/api/`;\n\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n\n    return {\n      images: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.log('Error fetching images:', error);\n    return {\n      images: [],\n      totalHits: 0,\n    };\n  }\n};","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const renderImages = (images) => {\n  const gallery = document.querySelector('.gallery');\n  if (images?.length === 0) {\n    iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  images.forEach((image) => {\n    const imageElement = document.createElement('div');\n    imageElement.classList.add('image-card');\n    imageElement.innerHTML = `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n      </a>\n      <div class=\"image-info\">\n        <p><strong>Likes</strong> <span>${image.likes}</span></p>\n        <p><strong>Views</strong> <span>${image.views}</span></p>\n        <p><strong>Comments</strong> <span>${image.comments}</span></p>\n        <p><strong>Downloads</strong> <span>${image.downloads}</span></p>\n      </div>\n    `;\n    gallery.appendChild(imageElement);\n  });\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  lightbox.refresh();\n};\n\nexport const showLoader = () => {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('active');\n};\n\nexport const hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('active');\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showLoader, hideLoader } from './js/render-functions.js';\n\nlet searchQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input[type=\"text\"]');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('#load-more-button');\nconst loader = document.querySelector('.loader');\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  searchQuery = input.value.trim();\n\n  if (!searchQuery) return;\n\n  currentPage = 1;\n  showLoader();\n  loadMoreButton.style.display = 'none';\n  loader.style.display = 'block';\n  gallery.innerHTML = '';\n\n  const { images, totalHits: total } = await fetchImages(searchQuery, currentPage);\n  renderImages(images);\n\n  totalHits = total;  // Update the totalHits variable\n  hideLoader();\n  loader.style.display = 'none';\n  loadMoreButton.style.display = currentPage * 15 >= totalHits ? 'none' : 'block';\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage++;\n  const { images, totalHits: total } = await fetchImages(searchQuery, currentPage);\n  renderImages(images);\n\n  totalHits = total;  // Update the totalHits variable\n  if (currentPage * 15 >= totalHits) {\n    loadMoreButton.style.display = 'none';\n    alert(\"We're sorry, but you've reached the end of search results.\");\n  }\n\n  scrollPage();\n});\n\nconst scrollPage = () => {\n  const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2, \n    behavior: 'smooth',\n  });\n};"],"names":["fetchImages","searchQuery","page","API_KEY","URL","response","axios","error","renderImages","images","gallery","iziToast","image","imageElement","SimpleLightbox","showLoader","hideLoader","currentPage","totalHits","form","input","loadMoreButton","loader","event","total","scrollPage","cardHeight"],"mappings":"owBAEO,MAAMA,EAAc,MAAOC,EAAaC,IAAS,CACtD,MAAMC,EAAU,qCACVC,EAAM,2BAEZ,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIF,EAAK,CACpC,OAAQ,CACN,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,EAED,MAAO,CACL,OAAQG,EAAS,KAAK,KACtB,UAAWA,EAAS,KAAK,SAC/B,CACG,OAAQE,EAAO,CACd,eAAQ,IAAI,yBAA0BA,CAAK,EACpC,CACL,OAAQ,CAAE,EACV,UAAW,CACjB,CACG,CACH,ECzBaC,EAAgBC,GAAW,CACtC,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAID,GAAA,YAAAA,EAAQ,UAAW,EAAG,CACxBE,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,UAChB,CAAK,EACD,MACD,CAEDF,EAAO,QAASG,GAAU,CACxB,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAU,IAAI,YAAY,EACvCA,EAAa,UAAY;AAAA,iBACZD,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,0CAGhBA,EAAM,KAAK;AAAA,0CACXA,EAAM,KAAK;AAAA,6CACRA,EAAM,QAAQ;AAAA,8CACbA,EAAM,SAAS;AAAA;AAAA,MAGzDF,EAAQ,YAAYG,CAAY,CACpC,CAAG,EAEgB,IAAIC,EAAe,YAAY,EACvC,QAAO,CAClB,EAEaC,EAAa,IAAM,CACf,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,QAAQ,CAC/B,EAEaC,EAAa,IAAM,CACf,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,QAAQ,CAClC,ECzCA,IAAIf,EAAc,GACdgB,EAAc,EACdC,EAAY,EAEhB,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQD,EAAK,cAAc,oBAAoB,EAC/CT,EAAU,SAAS,cAAc,UAAU,EAC3CW,EAAiB,SAAS,cAAc,mBAAmB,EAC3DC,EAAS,SAAS,cAAc,SAAS,EAE/CH,EAAK,iBAAiB,SAAU,MAAOI,GAAU,CAI/C,GAHAA,EAAM,eAAc,EACpBtB,EAAcmB,EAAM,MAAM,OAEtB,CAACnB,EAAa,OAElBgB,EAAc,EACdF,IACAM,EAAe,MAAM,QAAU,OAC/BC,EAAO,MAAM,QAAU,QACvBZ,EAAQ,UAAY,GAEpB,KAAM,CAAE,OAAAD,EAAQ,UAAWe,CAAK,EAAK,MAAMxB,EAAYC,EAAagB,CAAW,EAC/ET,EAAaC,CAAM,EAEnBS,EAAYM,EACZR,IACAM,EAAO,MAAM,QAAU,OACvBD,EAAe,MAAM,QAAUJ,EAAc,IAAMC,EAAY,OAAS,OAC1E,CAAC,EAEDG,EAAe,iBAAiB,QAAS,SAAY,CACnDJ,IACA,KAAM,CAAE,OAAAR,EAAQ,UAAWe,CAAK,EAAK,MAAMxB,EAAYC,EAAagB,CAAW,EAC/ET,EAAaC,CAAM,EAEnBS,EAAYM,EACRP,EAAc,IAAMC,IACtBG,EAAe,MAAM,QAAU,OAC/B,MAAM,4DAA4D,GAGpEI,GACF,CAAC,EAED,MAAMA,EAAa,IAAM,CACvB,MAAMC,EAAa,SAAS,cAAc,aAAa,EAAE,sBAAuB,EAAC,OACjF,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}